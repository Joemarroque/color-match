
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color Match</title>
  <style>
    body {
      font-family: sans-serif;
      background: #222;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 80px);
      grid-gap: 10px;
      margin: 20px 0;
    }

    .tile {
      width: 80px;
      height: 80px;
      background: #444;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.5s, border 0.3s;
    }

    .revealed {
      border: 2px solid #fff;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #08f;
      border: none;
      border-radius: 6px;
      color: white;
      cursor: pointer;
    }

    #turns {
      font-size: 18px;
      margin-bottom: 10px;
    }

    #musicToggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #333;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 20px;
      box-shadow: 0 0 5px #000;
    }

    #musicToggle span {
      margin-left: 5px;
    }
  </style>
</head>
<body>

<div id="musicToggle">ðŸŽµ<span id="musicStatus">ðŸ”´</span></div>

<h2>Color Match</h2>
<div id="turns">Turns left: 10</div>
<div class="grid" id="gameGrid"></div>
<button id="playAgain" style="display: none;">Play Again</button>

<audio id="clickSound" src="click.mp3"></audio>
<audio id="gameOverSound" src="gameover.mp3"></audio>
<audio id="bgMusic" src="bg-music.mp3" loop></audio>

<script>
  const colors = ["red", "blue", "green", "yellow", "orange", "purple", "cyan", "pink"];
  let tiles = [...colors, ...colors].sort(() => Math.random() - 0.5);

  const grid = document.getElementById('gameGrid');
  const turnsDisplay = document.getElementById('turns');
  const playAgainBtn = document.getElementById('playAgain');
  const bgMusic = document.getElementById('bgMusic');
  const musicToggle = document.getElementById('musicToggle');
  const musicStatus = document.getElementById('musicStatus');

  let firstTile = null;
  let secondTile = null;
  let lockBoard = false;
  let remainingTurns = 10;
  let streak = 0;
  let gameEnded = false;

  function updateTurns() {
    turnsDisplay.textContent = `Turns left: ${remainingTurns}`;
  }

  function reset() {
    firstTile = null;
    secondTile = null;
    lockBoard = false;
  }

  function checkGameOver() {
    const revealed = document.querySelectorAll('.tile.revealed');
    if (revealed.length === tiles.length) {
      endGame("ðŸŽ‰ Congratulations! You matched all colorsðŸ¤©");
    }
  }

  function endGame(message) {
    gameEnded = true;
    bgMusic.pause();
    bgMusic.currentTime = 0;
    document.getElementById('gameOverSound').play();
    setTimeout(() => {
      alert(message);
      playAgainBtn.style.display = 'block';
    }, 1000);
  }

  function createTile(color, index) {
    const tile = document.createElement('div');
    tile.classList.add('tile');
    tile.dataset.color = color;
    tile.dataset.index = index;

    tile.addEventListener('click', () => {
      if (lockBoard || tile.classList.contains('revealed') || tile === firstTile || gameEnded || remainingTurns <= 0) return;

      document.getElementById('clickSound').play();
      tile.style.background = color;

      if (!firstTile) {
        firstTile = tile;
        return;
      }

      secondTile = tile;
      lockBoard = true;

      if (firstTile.dataset.color === secondTile.dataset.color) {
        firstTile.classList.add('revealed');
        secondTile.classList.add('revealed');
        streak++;
        if (streak > 1) remainingTurns++;
        reset();
        updateTurns();
        checkGameOver();
      } else {
        streak = 0;
        remainingTurns--;
        updateTurns();
        setTimeout(() => {
          firstTile.style.background = '#444';
          secondTile.style.background = '#444';
          reset();
          if (remainingTurns === 0) {
            endGame("Game Over! You ran out of turnsðŸ‘¹");
          }
        }, 800);
      }
    });

    grid.appendChild(tile);
  }

  tiles.forEach((color, index) => createTile(color, index));
  updateTurns();

  musicToggle.addEventListener('click', () => {
    if (bgMusic.paused) {
      bgMusic.play().then(() => {
        musicStatus.textContent = "ðŸŸ¢";
      }).catch(err => console.log(err));
    } else {
      bgMusic.pause();
      musicStatus.textContent = "ðŸ”´";
    }
  });

  playAgainBtn.addEventListener('click', () => location.reload());
</script>

</body>
</html>
